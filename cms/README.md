# ðŸš€ Getting started with Strapi

Strapi comes with a full-featured [Command Line Interface (CLI)](https://docs.strapi.io/dev-docs/cli) which lets you scaffold and manage your project efficiently.

---

## ðŸ§ª Local development

From the root of the project:

### Start Next.js frontend

```bash
npm install
npm run dev
```

Frontend is available at:  
ðŸ“ `http://localhost:3000`

---

### Start Strapi backend

```bash
cd cms
npm install
npm run dev
```

Admin panel is available at:  
ðŸ“ `http://localhost:1337/admin`
---

## âš™ï¸ Production

For **production**, always build the admin panel before starting the app:

```bash
npm run build      # builds the admin panel
npm run start      # starts the Strapi API (no reload)
```

Admin panel is served via Nginx at:  
ðŸŒ `https://cms.andi.zamora.ai`

Frontend is served at:  
ðŸŒ `https://andi.zamora.ai`

---

## ðŸ“ Environment variables

Strapi uses a `.env` file to define environment-specific variables.

### âœ… Example `.env` for **local development**:

```env
# Server
HOST=0.0.0.0
PORT=1337
APP_URL=
PROXY_ENABLED=false

# Secrets
APP_KEYS=replace_with_dev_keys
API_TOKEN_SALT=replace_with_dev_salt
ADMIN_JWT_SECRET=replace_with_dev_secret
TRANSFER_TOKEN_SALT=replace_with_dev_salt
ENCRYPTION_KEY=replace_with_dev_key

# Database (SQLite by default)
DATABASE_CLIENT=sqlite
DATABASE_FILENAME=.tmp/data.db
JWT_SECRET=rLBfGErF6kb0iiYycCHuTg==
```

> Other DB fields like `DATABASE_HOST` or `DATABASE_NAME` can remain blank when using SQLite.

### âœ… Example `.env` for **production** (auto-generated by deploy):

```env
# Server
HOST=0.0.0.0
PORT=1337
APP_URL=https://cms.zamora.ai
PROXY_ENABLED=true

# Secrets
APP_KEYS=********
API_TOKEN_SALT=********
ADMIN_JWT_SECRET=********
TRANSFER_TOKEN_SALT=********
ENCRYPTION_KEY=********

# Database
DATABASE_CLIENT=sqlite
DATABASE_FILENAME=/var/www/strapi-data/data.db
```

---

## ðŸ“¦ Deployment process (CI/CD)

Deployment is automated (e.g. via GitHub Actions) and performs:

1. Writes `.env`
2. Installs dependencies
3. Builds the admin panel
4. Starts Strapi with PM2:

```bash
pm2 start npm --name strapi-app -- run start
pm2 save
```

---

## ðŸ’¾ Persistent SQLite database (production)

To avoid data loss on each deploy:

1. Move your DB outside the project folder:

```bash
/var/www/strapi-data/data.db
```

2. Update `.env`:

```env
DATABASE_FILENAME=/var/www/strapi-data/data.db
```

3. Ensure `.gitignore` includes:

```gitignore
cms/.tmp/
cms/**/*.db
```

---

## ðŸ”’ HTTPS & Nginx setup

Strapi is reverse-proxied via **Nginx**:

- `https://cms.andi.zamora.ai` â†’ Strapi (`localhost:1337`)
- `https://andi.zamora.ai` â†’ Next.js frontend (`localhost:3000`)

SSL certificates are handled with **Let's Encrypt** (`certbot`).

---

## ðŸ›  Local setup for new developers

1. Copy `.env.example` to `.env`:

```bash
cp cms/.env.example cms/.env
```

2. Replace all placeholder secrets (`APP_KEYS`, salts etc.) with random values. You can generate them using:

```bash
openssl rand -base64 32
```

3. Install dependencies and run:

```bash
cd cms
npm install
npm run develop
```

---

## ðŸ“š Useful links

- [Strapi Docs](https://docs.strapi.io)
- [Deployment Guide](https://docs.strapi.io/dev-docs/deployment)
- [Admin Panel Customization](https://docs.strapi.io/dev-docs/admin-panel/customization)

---

## âœ¨ Community

- [Discord](https://discord.strapi.io)
- [Forum](https://forum.strapi.io/)
- [GitHub](https://github.com/strapi/strapi)
- [Awesome Strapi](https://github.com/strapi/awesome-strapi)

---

<sub>ðŸ¤« Psst! [Strapi is hiring](https://strapi.io/careers).</sub>
